<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test - Steelwool KPI</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f7fa;
    }
    
    .test-container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    h1 {
      color: #2563eb;
    }
    
    .test-item {
      background: #f8fafc;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      border-left: 4px solid #2563eb;
    }
    
    .pass {
      border-left-color: #10b981;
    }
    
    .fail {
      border-left-color: #dc2626;
    }
    
    button {
      background: #2563eb;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      margin: 10px 5px;
      font-size: 14px;
    }
    
    button:hover {
      background: #1d4ed8;
    }
    
    #results {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>ğŸ§ª Steelwool KPI System - Test Suite</h1>
    
    <p>This page tests that all components are working correctly.</p>
    
    <button onclick="runTests()">Run All Tests</button>
    <button onclick="location.href='index.html'">Open Main App</button>
    <button onclick="location.href='icon-generator.html'">Open Icon Generator</button>
    
    <div id="results"></div>
  </div>

  <script>
    function runTests() {
      const results = document.getElementById('results');
      results.innerHTML = '<h2>Test Results:</h2>';
      
      const tests = [
        {
          name: 'LocalStorage Available',
          test: () => {
            try {
              localStorage.setItem('test', 'test');
              localStorage.removeItem('test');
              return true;
            } catch (e) {
              return false;
            }
          }
        },
        {
          name: 'Service Worker Support',
          test: () => 'serviceWorker' in navigator
        },
        {
          name: 'Fetch API Available',
          test: () => 'fetch' in window
        },
        {
          name: 'Canvas API Available',
          test: () => {
            try {
              const canvas = document.createElement('canvas');
              return !!canvas.getContext('2d');
            } catch (e) {
              return false;
            }
          }
        },
        {
          name: 'JSON Support',
          test: () => {
            try {
              JSON.stringify({test: true});
              JSON.parse('{"test": true}');
              return true;
            } catch (e) {
              return false;
            }
          }
        },
        {
          name: 'ES6 Features (Arrow Functions)',
          test: () => {
            try {
              eval('() => true');
              return true;
            } catch (e) {
              return false;
            }
          }
        },
        {
          name: 'Offline Detection',
          test: () => 'onLine' in navigator
        },
        {
          name: 'Download Support',
          test: () => {
            const a = document.createElement('a');
            return 'download' in a;
          }
        }
      ];
      
      let passed = 0;
      let failed = 0;
      
      tests.forEach(test => {
        const result = test.test();
        const status = result ? 'âœ… PASS' : 'âŒ FAIL';
        const className = result ? 'pass' : 'fail';
        
        if (result) passed++;
        else failed++;
        
        results.innerHTML += `
          <div class="test-item ${className}">
            <strong>${status}</strong> - ${test.name}
          </div>
        `;
      });
      
      results.innerHTML += `
        <div class="test-item" style="border-left-color: #2563eb; margin-top: 20px;">
          <h3>Summary</h3>
          <p><strong>Total Tests:</strong> ${tests.length}</p>
          <p><strong>Passed:</strong> ${passed}</p>
          <p><strong>Failed:</strong> ${failed}</p>
          <p><strong>Success Rate:</strong> ${Math.round((passed/tests.length) * 100)}%</p>
        </div>
      `;
      
      if (failed === 0) {
        results.innerHTML += `
          <div class="test-item pass" style="text-align: center; font-size: 18px;">
            <strong>ğŸ‰ All tests passed! Your system is ready to use.</strong>
          </div>
        `;
      } else {
        results.innerHTML += `
          <div class="test-item fail">
            <strong>âš ï¸ Some tests failed.</strong><br>
            Your browser may not support all features. Try using a modern browser like Chrome, Firefox, or Edge.
          </div>
        `;
      }
    }
    
    // Run tests on load
    window.onload = () => {
      document.body.innerHTML += `
        <div class="test-container" style="margin-top: 20px;">
          <h2>ğŸ“‹ Pre-Deployment Checklist</h2>
          <ul style="line-height: 2;">
            <li>â˜ All files are present in the project folder</li>
            <li>â˜ Icons generated and saved to icons/ folder</li>
            <li>â˜ Company name updated in index.html</li>
            <li>â˜ Colors customized in styles.css (optional)</li>
            <li>â˜ All tests pass (run tests above)</li>
            <li>â˜ Tested in multiple browsers</li>
            <li>â˜ Ready to deploy to GitHub Pages</li>
          </ul>
          
          <h3>ğŸš€ Next Steps:</h3>
          <ol style="line-height: 2;">
            <li>Review <strong>DEPLOYMENT.md</strong> for deployment instructions</li>
            <li>Generate icons using icon-generator.html</li>
            <li>Push to GitHub and enable GitHub Pages</li>
            <li>Test the deployed app</li>
            <li>Share the URL with your team</li>
          </ol>
        </div>
      `;
    };
  </script>
</body>
</html>
